<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.4.1/paper.css"?>
<odoo>
    <data>
        <template id="payrun_report_template">
            <t t-call="web.html_container">
            <t t-call="web.external_layout">
            <t t-set="stylesheet" t-value="'https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.4.1/paper.css'"/>
                <div class="text-center">
                    <span>
                        <h1 style="font-size: 45pt;">
                        <t t-esc="docs.company_id.display_name"/>
                        </h1>
                        <h2 style="font-size: 40pt;">
                        PAYRUN REPORT
                        </h2>
                        <h3 style="font-size: 30pt;">
                        Period: <t t-esc="data.get('report_start')"/> - <t t-esc="data.get('report_end')"/>
                        </h3>
                        <h3 style="font-size: 30pt;">
                        Generated By: <t t-esc="data.get('name')"/>
                         On: <t t-esc="date_time.get('date')"/>
                         At: <t t-esc="date_time.get('time')"/>
                        </h3>
                        
                        <hr/>
                    </span>

                </div>
                <div class="full-width">
                <h4>
                <table width="100%" class="text-center" style="font-size: 25pt;">
                    <tr>
                        <th height="50">
                            <span>ID</span>
                        </th>
                        <th>
                            <span>Employee</span>
                        </th>
                        <th>
                            <span>Date</span>
                        </th>
                        <th>
                            <span>Rate</span>
                        </th>
                        <th>
                            <span>Hours</span>
                        </th>
                        <th>
                            <span>Basic</span>
                        </th>
                        <th>
                            <span>OT/Jobs</span>
                        </th>
                        <th>
                            <span>Allowance</span>
                        </th>
                        <th>
                            <span>Gross</span>
                        </th>
                        <th>
                            <span>Deductions</span>
                        </th>
                        <th>
                            <span>Loans</span>
                        </th>
                        <th>
                            <span>NIS</span>
                        </th>
                        <th>
                            <span>HSUR</span>
                        </th>
                        <th>
                            <span>PAYE</span>
                        </th>
                        <th>
                            <span>Total Deductions</span>
                        </th>
                        <th>
                            <span>Net</span>
                        </th>
                    </tr>
                    <tbody>
                        <t t-foreach="docs" t-as="payslip">
                            <tr><t t-set="empty_value">&#32;</t>
                                <td>
                                    <t t-set="employee_id" t-value="empty_value" />
                                    <t t-if="payslip.employee_id.barcode != False" t-set="employee_id" t-value="payslip.employee_id.barcode"/>
                                    <span><t t-esc="employee_id"/></span>
                                </td>
                                <td>
                                    <span><t t-esc="payslip.employee_id.name"/></span>
                                </td>
                                <td>
                                    <span><t t-esc="payslip.date_to"/></span>
                                </td>
                                <td>
                                    <span><t t-esc="payslip.contract_id.hourly_wage"/></span>
                                </td>
                                <td>
                                    <span><t t-esc="payslip.sum_worked_hours"/></span>
                                </td>
                                <t>
                                    <t t-set="default_value">0.00</t>
                                    <t t-set="basic" t-value="default_value" />
                                    <t t-set="ot" t-value="default_value" />
                                    <t t-set="allowance" t-value="default_value" />
                                    <t t-set="gross" t-value="default_value" />
                                    <t t-set="deductions" t-value="default_value" />
                                    <t t-set="loans" t-value="default_value" />
                                    <t t-set="nis" t-value="default_value" />
                                    <t t-set="hsur" t-value="default_value" />
                                    <t t-set="paye" t-value="default_value" />
                                    <t t-set="total_deductions" t-value="default_value" />
                                    <t t-set="net" t-value="default_value" />
                                </t>

                                <t t-set="line_ids" t-value="payslip.line_ids"/>
                                <t t-foreach="line_ids" t-as="line">
        
                                    <t t-if="line.code == 'BASIC'"><t t-set="basic" t-value="line.amount"/></t>
                                    <t t-if="line.code == 'OT'"><t t-set="ot" t-value="line.amount"/></t>
                                    <t t-if="line.code == 'ADD'"><t t-set="allowance" t-value="line.amount"/></t>
                                    <t t-if="line.code == 'GROSS'"><t t-set="gross" t-value="line.amount"/></t>
                                    <t t-if="line.code == 'DED'"><t t-set="deductions" t-value="line.amount"/></t>
                                    <t t-if="line.code == 'LOANS'"><t t-set="loans" t-value="line.amount"/></t>
                                    <t t-if="line.code == 'NIS'"><t t-set="nis" t-value="line.amount"/></t>
                                    <t t-if="line.code == 'HSUR'"><t t-set="hsur" t-value="line.amount"/></t>
                                    <t t-if="line.code == 'PAYE'"><t t-set="paye" t-value="line.amount"/></t>
                                    <t t-if="line.code == 'T_DED'"><t t-set="total_deductions" t-value="line.amount"/></t>
                                    <t t-if="line.code == 'NET'"><t t-set="net" t-value="line.amount"/></t>
                                </t>
                                <t>
                                    <t t-set="total_deductions" t-value="nis+hsur+paye"/>
                                    <t t-set="total_deductions" t-value="round(total_deductions,2)"/>
                                    <td t-attf-style="white-space:nowrap;"><span><t t-esc="basic"/></span></td>
                                    <td t-attf-style="white-space:nowrap;"><span><t t-esc="ot"/></span></td>
                                    <td t-attf-style="white-space:nowrap;"><span><t t-esc="allowance"/></span></td>
                                    <td t-attf-style="white-space:nowrap;"><span><t t-esc="gross"/></span></td>
                                    <td t-attf-style="white-space:nowrap;"><span><t t-esc="deductions"/></span></td>
                                    <td t-attf-style="white-space:nowrap;"><span><t t-esc="loans"/></span></td>
                                    <td t-attf-style="white-space:nowrap;"><span><t t-esc="nis"/></span></td>
                                    <td t-attf-style="white-space:nowrap;"><span><t t-esc="hsur"/></span></td>
                                    <td t-attf-style="white-space:nowrap;"><span><t t-esc="paye"/></span></td>
                                    <td t-attf-style="white-space:nowrap;"><span><t t-esc="total_deductions"/></span></td>
                                    <td t-attf-style="white-space:nowrap;"><span><t t-esc="net"/></span></td>
                                </t>
                            </tr>
                        </t>
                    </tbody>
                    <hr style="border-top: 0.5px solid black;"/>
                    <td t-attf-style="white-space:nowrap;"><span></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="docs.company_id.display_name"/></b></span></td>
                    <td t-attf-style="white-space:nowrap;"><span></span></td>
                    <td t-attf-style="white-space:nowrap;"><span></span></td>
                    <td t-attf-style="white-space:nowrap;"><span></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="totals.get('basic')"/></b></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="totals.get('ot')"/></b></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="totals.get('additions')"/></b></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="totals.get('gross')"/></b></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="totals.get('other_ded')"/></b></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="totals.get('loans')"/></b></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="totals.get('nis')"/></b></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="totals.get('hsur')"/></b></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="totals.get('paye')"/></b></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="totals.get('total_deductions')"/></b></span></td>
                    <td t-attf-style="white-space:nowrap;"><span><b><t t-esc="totals.get('net')"/></b></span></td>
                </table>
                <hr style="border-top: 2px solid black;"/>
                <t>
                    <tr>
                        <span>
                            <h4 style="font-size: 20pt;"><b><t>Total Employees: </t>
                            <t t-esc="totals.get('employees')"/></b></h4>
                        </span>
                    </tr>
                </t>
                 <t>
                 <span>
                    <hr style="border-top: 2px solid black;"/>
                    
                   <t><tr><span><p  style="font-size: 20pt;">Prepared By  :_____________________________________             &#32;          Date:______________________________</p></span></tr></t><br/>
                   
                    
                   <t><tr><span><p  style="font-size: 20pt;">Verified By  :_____________________________________             &#32;           Date:______________________________</p></span></tr></t><br/>
                    
                    
                    <t><tr><span><p  style="font-size: 20pt;">Approved By 1:_____________________________________             &#32;            Date:______________________________</p></span></tr></t><br/>
                    
                    
                    <t><tr><span><p  style="font-size: 20pt;">Approved By 2:_____________________________________               &#32;          Date:______________________________</p></span></tr></t><br/>
                    
                </span>
                </t>
                </h4>
                <hr style="border-top: 4px solid black;"/>
                </div>
                </t>
            </t>
        </template>
    </data>
</odoo>